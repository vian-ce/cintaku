<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Untuk Sayangku</title>
  <style>
    body {
      margin: 0; padding: 0;
      font-family: 'Poppins', sans-serif;
      height: 100vh; display: flex;
      justify-content: center; align-items: center;
      background: linear-gradient(135deg, #ffdde1, #ee9ca7);
      overflow: hidden; position: relative;
      transition: transform 1s ease;
    }

    /* zoom efek */
    body.zoom-in { animation: zoomIn 1s ease; }
    body.zoom-out { animation: zoomOut 1s ease; }
    @keyframes zoomIn {0%{transform:scale(1);}50%{transform:scale(1.1);}100%{transform:scale(1);} }
    @keyframes zoomOut {0%{transform:scale(1);}50%{transform:scale(0.9);}100%{transform:scale(1);} }

    /* bubble */
    .bubbles { position:absolute;width:100%;height:100%;top:0;left:0;overflow:hidden;z-index:0; }
    .bubbles span { position:absolute;bottom:-100px;background:rgba(255,255,255,0.4);border-radius:50%;animation:bubble 12s linear infinite;z-index:0;}
    .bubbles span:nth-child(1){width:40px;height:40px;left:10%;animation-duration:10s;}
    .bubbles span:nth-child(2){width:20px;height:20px;left:30%;animation-duration:8s;animation-delay:2s;}
    .bubbles span:nth-child(3){width:25px;height:25px;left:50%;animation-duration:12s;animation-delay:4s;}
    .bubbles span:nth-child(4){width:15px;height:15px;left:70%;animation-duration:9s;animation-delay:1s;}
    .bubbles span:nth-child(5){width:35px;height:35px;left:85%;animation-duration:14s;animation-delay:3s;}
    .bubbles span:nth-child(6){width:18px;height:18px;left:25%;animation-duration:11s;animation-delay:6s;}
    .bubbles span:nth-child(7){width:22px;height:22px;left:60%;animation-duration:13s;animation-delay:5s;}
    .bubbles span:nth-child(8){width:28px;height:28px;left:75%;animation-duration:15s;animation-delay:7s;}
    @keyframes bubble {0%{transform:translateY(0) scale(1);opacity:0.6;}50%{opacity:1;}100%{transform:translateY(-110vh) scale(1.2);opacity:0;}}

    /* burst */
    .burst { position:absolute;width:20px;height:20px;background:rgba(255,255,255,0.9);
      border-radius:50%;pointer-events:none;animation:burstAnim 0.6s ease-out forwards;z-index:99;}
    @keyframes burstAnim {0%{transform:scale(0.5);opacity:1;}50%{transform:scale(2);opacity:0.7;}100%{transform:scale(3);opacity:0;}}

    /* container */
    .container {
      position: relative; z-index: 1; text-align: center;
      max-width: 500px; padding: 20px;
      background: rgba(255,255,255,0.2);
      border-radius: 15px; backdrop-filter: blur(10px);
      box-shadow: 0 0 15px rgba(255,192,203,0.8);
    }

    /* frame avatar */
    .avatar-frame {
      width: 140px; height: 140px;
      border-radius: 50%;
      border: 5px solid #fff;
      overflow: hidden;
      margin: 0 auto 15px;
      box-shadow: 0 0 15px rgba(255,192,203,0.8);
    }
    .avatar {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* animasi gif hanya fade in */
    .fade-in {
      animation: fadeIn 1.5s ease;
    }
    @keyframes fadeIn {
      0% { opacity: 0; transform: scale(0.9);}
      100% { opacity: 1; transform: scale(1);}
    }

    /* text display dengan bingkai */
    .text-display {
      font-size: 22px; font-weight: 500; color: #fff;
      min-height: 120px; margin-bottom: 25px; white-space: pre-line;
      padding: 15px;
      border: 3px solid #fff;
      border-radius: 15px;
      background: rgba(255,255,255,0.15);
      box-shadow: 0 0 12px rgba(255,192,203,0.8);
    }

    .btn { padding: 10px 18px; border: 2px solid #fff; border-radius: 8px; background: transparent; color: #fff; font-size: 15px;
      cursor: pointer; transition: all 0.3s ease; margin: 5px; text-shadow: 0 0 5px #ff6b81;}
    .btn:hover { background: rgba(255,255,255,0.1); box-shadow: 0 0 15px #ff6b81; }
  </style>
</head>
<body>
  <div class="bubbles"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></div>

  <div class="container">
    <div class="avatar-frame">
      <img id="avatarGif" class="avatar" src="bear3.gif">
    </div>

    <div class="text-display" id="loveText">Hai sayangku üíñ</div>

    <div id="buttons">
      <button class="btn" id="nextBtn" onclick="nextText(this)">‚û° Geser</button>
      <button class="btn" id="poemBtn" onclick="showPoem(this)" style="display:none;">‚û° Puisi</button>
    </div>
  </div>

  <script>
    const texts = [
      "Hai Sayangkuu, cintaakuu üíñ",
      "Kamu adalah orang pertama yang membuatku merasakan perasaan seperti ini ü•∞üòä",
      "Maaf jikalau aku banyak kekurangan üòû",
      "Kamu tuh imutt, cantik, lucu menggemaskanüòö ‚ú®",
      "Kalau ada apa apa cerita ama aku yaü§óüíï",
      "Dijalanan ada lampu\nDikerajaan ada ratu\nDikuburan ada hantu\nDihatiku cuma ada kamu ‚ù§Ô∏è",
      "I love you, Forever ‚ù§Ô∏è"
    ];

    const poemText = `üå∏ Untukmu Sayangku üå∏

Dalam tiap hembus angin senja,  
namamu bergetar lembut di hatiku.  
Kau adalah bintang yang tak pernah redup,  
meski dunia padam dalam gelap.  

Aku menulis ini bukan sekadar kata,  
tapi jejak cinta yang akan selalu ada.  

-Vian- `;

    const gifs = ["bear3.gif", "bear2.gif", "bear1.gif"];
    const poemGifs = ["bear2.gif", "bear3.gif"];

    let index = 0;
    let zoomToggle = true;
    let poemInterval = null;

    function typeWriter(text, element) {
      let i = 0;
      element.innerHTML = "";
      function typing() {
        if (i < text.length) {
          element.innerHTML += text.charAt(i);
          i++;
          setTimeout(typing, 60);
        }
      }
      typing();
    }

    function triggerZoomAndBurst(button) {
      if (zoomToggle) document.body.classList.add("zoom-in");
      else document.body.classList.add("zoom-out");
      zoomToggle = !zoomToggle;
      setTimeout(() => { document.body.classList.remove("zoom-in","zoom-out"); }, 1000);

      const rect = button.getBoundingClientRect();
      const centerX = rect.left + rect.width / 2;
      const centerY = rect.top + rect.height / 2;
      for (let i = 0; i < 6; i++) createBurst(centerX, centerY);
    }

    function createBurst(x, y) {
      const burst = document.createElement("div");
      burst.className = "burst";
      burst.style.left = (x - 10) + "px";
      burst.style.top = (y - 10) + "px";
      document.body.appendChild(burst);
      setTimeout(() => burst.remove(), 600);
    }

    function changeGif(src, animate=false) {
      const avatarGif = document.getElementById("avatarGif");
      avatarGif.src = src;
      if (animate) {
        avatarGif.classList.remove("fade-in");
        void avatarGif.offsetWidth; // reflow trik
        avatarGif.classList.add("fade-in");
      }
    }

    function nextText(btn) {
      const textElement = document.getElementById("loveText");
      index++;
      if (index >= texts.length) index = texts.length - 1;
      typeWriter(texts[index], textElement);

      // ganti gif setiap 2 slide
      const gifIndex = Math.floor(index / 2) % gifs.length;
      const animateGif = (index % 2 === 0); // hanya tiap 2 slide
      changeGif(gifs[gifIndex], animateGif);

      triggerZoomAndBurst(btn);

      if (index === texts.length - 1) {
        document.getElementById("nextBtn").style.display = "none";
        document.getElementById("poemBtn").style.display = "inline-block";
      }
    }

    function showPoem(btn) {
      const textElement = document.getElementById("loveText");
      typeWriter(poemText, textElement);
      document.getElementById("buttons").style.display = "none";

      let poemIndex = 0;
      changeGif(poemGifs[poemIndex], true);
      if (poemInterval) clearInterval(poemInterval);
      poemInterval = setInterval(() => {
        poemIndex = (poemIndex + 1) % poemGifs.length;
        changeGif(poemGifs[poemIndex], true);
      }, 3000);

      triggerZoomAndBurst(btn);
    }

    window.onload = () => {
      const textElement = document.getElementById("loveText");
      typeWriter(texts[index], textElement);
      changeGif(gifs[0], true);
    };
  </script>
</body>
</html>